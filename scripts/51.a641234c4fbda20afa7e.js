"use strict";(globalThis.webpackChunkvideo_calls=globalThis.webpackChunkvideo_calls||[]).push([[51],{5051:(e,t,r)=>{r.r(t),r.d(t,{Messages:()=>Z,default:()=>Z});var a=r(7294),l=r(1508),n=r(2658),o=r(8206),c=r(5705),i=r(6128),s=r(6141),d=r(6738),p=r(6974),m=r(9482),g=r(9706),u=r(239),x=r(9704),h=r(9225),E=r(7091),y=r(7294);const Z=(0,a.memo)((()=>{const e=(0,p.s0)(),t=(0,x.v9)(h.dY),r=(0,x.I0)(),Z=(0,x.v9)(h.fd),[v,b]=(0,a.useState)(),[C,f]=(0,a.useState)(""),[k,w]=(0,a.useState)("");return(0,a.useEffect)((()=>{var e;e=function*(){const e=yield m.b.post("/get-personal-messages-channels");b(e.data)},new Promise(((t,r)=>{var a=t=>{try{n(e.next(t))}catch(e){r(e)}},l=t=>{try{n(e.throw(t))}catch(e){r(e)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,l);n((e=e.apply(undefined,null)).next())})),u.W.on("on-channel-join",((e,t)=>{console.log("Сообщение в канале:",e),w(t),t&&r((0,E.n)({channel:t}))})),k&&r((0,E.n)({channel:k})),u.W.on("on-message",(e=>{e&&r((0,E.n)({channel:e}))}))}),[]),(0,a.useEffect)((()=>{console.log("channelMessages",Z)}),[Z]),(0,a.useEffect)((()=>{console.log("usersMessages",v)}),[v]),y.createElement(l.Z,{sx:{display:"grid",gridTemplateColumns:"72px 376px 1fr",height:"100%",backgroundColor:o.r.palette.common.white}},y.createElement(l.Z,{sx:{backgroundColor:o.r.palette.grey[200]}},y.createElement(c.W,null)),y.createElement(l.Z,{sx:{display:"grid",gridTemplateRows:"72px max-content 1fr 64px",backgroundColor:o.r.palette.grey[400],overflow:"hidden"}},y.createElement(l.Z,{sx:{padding:"24px 20px",borderBottom:`1px solid ${o.r.palette.grey[600]}`}},y.createElement(n.Z,{variant:"h6"},"Личные сообщения")),y.createElement(l.Z,{sx:{padding:"16px"}},y.createElement(d.z,{fullWidth:!0,variant:"contained",onClick:()=>e("/friends/all-friends")},"Друзья")),y.createElement(l.Z,{sx:{margin:"28px 4px",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:o.r.palette.grey[300],border:`1px solid ${o.r.palette.grey[500]}`,borderRadius:"8px"}}},y.createElement(l.Z,{sx:{display:"grid",rowGap:"12px",padding:"0 4px"}},null==v?void 0:v.map((e=>y.createElement(s.n,{key:e.userData._id,id:e.userData._id,name:e.userData.name,status:e.userData.status,email:e.userData.email,channelId:e.value._id}))))),y.createElement(i.a,null)),y.createElement(l.Z,{sx:{display:"grid",gridTemplateRows:"1fr",backgroundColor:o.r.palette.grey[500],overflow:"hidden"}},y.createElement(l.Z,{sx:{display:"grid",gridTemplateRows:"1fr max-content",rowGap:"16px",margin:"24px 16px",backgroundColor:o.r.palette.common.white,borderRadius:"8px",padding:"16px",overflow:"hidden"}},y.createElement(l.Z,{sx:{display:"grid",padding:"8px",overflow:"hidden",gridTemplateRows:"max-content 1fr",rowGap:"16px"}},y.createElement(n.Z,null,"Сообщения:"),y.createElement(l.Z,{sx:{display:"grid",overflow:"scroll",rowGap:"8px",alignContent:"start",height:"100%"}},null==Z?void 0:Z.map((e=>y.createElement(l.Z,{key:e._id,sx:{padding:"8px",border:"1px solid #000000",display:"grid",borderRadius:"8px"}},y.createElement(s.n,{id:e._id,name:e.author.name,status:e.author.status,email:e.author.email}),y.createElement(n.Z,null,e.text)))))),y.createElement(l.Z,{sx:{display:"grid",gridTemplateColumns:"1fr max-content",columnGap:"16px"}},y.createElement(g.n,{type:"text",id:"message",name:"message",label:"Сообщение",value:C,onChange:e=>f(e.target.value),placeholder:"Введите текст сообщения"}),y.createElement(d.z,{variant:"contained",color:"primary",onClick:()=>{k&&C&&(u.W.emit("on-message",k,C,t),f(""))}},"Отправить сообщение"))),y.createElement(p.j3,null)))}))},5705:(e,t,r)=>{r.d(t,{W:()=>g});var a=r(7294),l=r(6974),n=r(2855),o=r(4433),c=r(5683),i=r(1508),s=r(5301),d=r(7720),p=r(8206),m=r(7294);const g=(0,a.memo)((()=>{const e=(0,l.s0)();return m.createElement(i.Z,{sx:{display:"grid",rowGap:"24px",height:"100%",alignContent:"start",padding:"25px 16px",justifyContent:"center"}},m.createElement(i.Z,{sx:{display:"grid",rowGap:"16px"}},m.createElement(s.Z,{title:"Друзья",arrow:!0,placement:"right"},m.createElement(i.Z,{sx:{display:"grid",padding:"8px",backgroundColor:p.r.palette.grey[400],cursor:"pointer",borderRadius:"8px",justifyContent:"center",width:"40px"},onClick:()=>e("/friends")},m.createElement(n.Z,null))),m.createElement(s.Z,{title:"Каналы",arrow:!0,placement:"right"},m.createElement(i.Z,{sx:{display:"grid",padding:"8px",backgroundColor:p.r.palette.grey[400],cursor:"pointer",borderRadius:"8px",justifyContent:"center",width:"40px"},onClick:()=>e("/channels")},m.createElement(o.Z,null)))),m.createElement(d.Z,null),m.createElement(s.Z,{title:"Профиль",arrow:!0,placement:"right"},m.createElement(i.Z,{sx:{display:"grid",padding:"8px",backgroundColor:p.r.palette.grey[400],cursor:"pointer",borderRadius:"8px",justifyContent:"center",width:"40px"},onClick:()=>e("/profile")},m.createElement(c.Z,null))))}))},6128:(e,t,r)=>{r.d(t,{a:()=>y});var a=r(7294),l=r(1508),n=r(1196),o=r(7109),c=r(2658),i=r(720),s=r(8206),d=r(5949),p=r(5893);const m=(0,d.Z)((0,p.jsx)("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"}),"MicOff"),g=(0,d.Z)((0,p.jsx)("path",{d:"m21 6.5-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2 2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"}),"VideocamOff");var u=r(5683),x=r(9704),h=r(9225),E=r(7294);const y=(0,a.memo)((()=>{const e=(0,x.v9)(h.jQ),t=(0,x.v9)(h.dY),r=(0,x.v9)(h.yh);return E.createElement(l.Z,{sx:{display:"grid",alignItems:"center",backgroundColor:s.r.palette.grey[300],padding:"12px 20px"}},E.createElement(l.Z,{sx:{display:"grid",columnGap:"8px",gridTemplateColumns:"40px 1fr 104px"}},E.createElement(l.Z,{sx:{".MuiBadge-badge":{border:`1px solid ${s.r.palette.common.white}`},".MuiBadge-colorSuccess":{backgroundColor:s.r.palette.success.light},".MuiBadge-colorError":{backgroundColor:s.r.palette.error.light}}},E.createElement(n.Z,{overlap:"circular",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"online"===r?"success":"error"},E.createElement(o.Z,{sx:{backgroundColor:i.Z[500]}}))),E.createElement(l.Z,null,E.createElement(c.Z,{variant:"body2"},e),E.createElement(c.Z,{sx:{color:s.r.palette.grey[500]},variant:"caption"},"#",t.slice(-4))),E.createElement(l.Z,{sx:{display:"grid",columnGap:"16px",gridTemplateColumns:"repeat(3, 24px)",alignItems:"center"}},E.createElement(m,{sx:{color:s.r.palette.grey[700]}}),E.createElement(g,{sx:{color:s.r.palette.grey[700]}}),E.createElement(u.Z,{sx:{color:s.r.palette.grey[700]}}))))}))},6141:(e,t,r)=>{r.d(t,{n:()=>Z});var a=r(7294),l=r(1508),n=r(1196),o=r(7109),c=r(2658),i=r(6867),s=r(720),d=r(8206),p=r(5949),m=r(5893);const g=(0,p.Z)((0,m.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");var u=r(239),x=r(9704),h=r(9225),E=r(6974),y=r(7294);const Z=(0,a.memo)((({name:e,status:t,channelId:r})=>{const a=(0,x.v9)(h.dY),p=(0,E.s0)();return y.createElement(l.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr max-content",columnGap:"8px",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",":hover":{backgroundColor:d.r.palette.grey[300],".delete-icon":{display:"grid"}},".MuiBadge-badge":{border:`1px solid ${d.r.palette.common.white}`},".MuiBadge-colorSuccess":{backgroundColor:d.r.palette.success.light},".MuiBadge-colorError":{backgroundColor:d.r.palette.error.light}},onClick:()=>{u.W.emit("on-channel-join",r,a),p("/messages")}},y.createElement(n.Z,{overlap:"circular",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"online"===t?"success":"error"},y.createElement(o.Z,{sx:{backgroundColor:s.Z[500]}})),y.createElement(l.Z,{sx:{display:"grid",gridTemplateColumns:"max-content"}},y.createElement(c.Z,{variant:"body2"},e||""),y.createElement(c.Z,{variant:"caption"},"В сети")),y.createElement(l.Z,{className:"delete-icon",sx:{display:"none"}},y.createElement(i.Z,null,y.createElement(g,{sx:{color:d.r.palette.grey[700]}}))))}))}}]);
//# sourceMappingURL=51.a641234c4fbda20afa7e.js.map