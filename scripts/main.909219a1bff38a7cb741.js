(()=>{"use strict";var e,t={4242:(e,t,r)=>{var a=r(3935),n=r(9704),o=r(9711),l=r(5974),i=r(2287),c=r(6403),s=r(9084),d=r(9669),p=r.n(d);const m="https://ioinitid-video-calls-server.herokuapp.com";var u=r(2132);const g=(0,c.oM)({name:"authorization",initialState:{access_token:"",authorizated:!1,loading:{access_token:!1},error:{access_token:null}},reducers:{requestRegistrationAction:(e,{payload:t})=>{e.loading.access_token=!0},successRegistrationAction:(e,{payload:t})=>{const{access_token:r}=t;e.access_token=r,e.authorizated=!0,e.loading.access_token=!1,localStorage.setItem("access_token",r)},failureRegistrationAction:(e,{payload:t})=>{const{error:r}=t;e.error.access_token=(e=>{if(p().isAxiosError(e)&&e.response)return e.response.data})(r),e.loading.access_token=!1},requestAuthorizationAction:(e,{payload:t})=>{e.loading.access_token=!0},successAuthorizationAction:(e,{payload:t})=>{const{access_token:r}=t;e.access_token=r,e.authorizated=!0,e.loading.access_token=!1,localStorage.setItem("access_token",r)},failureAuthorizationAction:(e,{payload:t})=>{const{error:r}=t;e.error.access_token=(e=>{if(p().isAxiosError(e)&&e.response)return e.response.data})(r),e.loading.access_token=!1},requestRefreshAction:e=>{e.loading.access_token=!0},successRefreshAction:(e,{payload:t})=>{const{access_token:r}=t;e.access_token=r,e.authorizated=!0,e.loading.access_token=!1,localStorage.setItem("access_token",r)},failureRefreshAction:(e,{payload:t})=>{const{error:r}=t;e.error.access_token=r,e.loading.access_token=!1,e.authorizated=!1,e.access_token="",localStorage.removeItem("access_token"),location.reload()},requestLogoutAction:e=>{e.loading.access_token=!0},successLogoutAction:e=>{e.access_token="",e.authorizated=!1,e.loading.access_token=!1,e.error.access_token=null,localStorage.removeItem("access_token")},failureLogoutAction:(e,{payload:t})=>{var r;const{error:a}=t;e.error.access_token=a,e.loading.access_token=!1,p().isAxiosError(a)?u.Am.error(null==(r=a.response)?void 0:r.data.message):u.Am.error(a.message||"Ошибка авторизации. Проверьте логин и пароль.")}}}),{requestRegistrationAction:x,successRegistrationAction:f,failureRegistrationAction:h,requestAuthorizationAction:v,successAuthorizationAction:E,failureAuthorizationAction:b,requestRefreshAction:y,successRefreshAction:Z,failureRefreshAction:C,requestLogoutAction:k,successLogoutAction:w,failureLogoutAction:S}=g.actions,I=g.reducer,A=p().create({withCredentials:!0,baseURL:`${m}/api`});A.interceptors.request.use((e=>(e.headers&&(e.headers.Authorization=`Bearer ${localStorage.getItem("access_token")||""}`),e)),(e=>Promise.reject(e))),A.interceptors.response.use((e=>e),(e=>{return void 0,null,t=function*(){const t=e.config;if(e.response){if(401===e.response.status&&!t._retry){t._retry=!0;try{he.dispatch(y())}catch(e){he.dispatch(C(e))}return A(t)}if(401!==e.response.status)return Promise.reject(e.response.data)}return Promise.reject(e)},new Promise(((e,r)=>{var a=e=>{try{o(t.next(e))}catch(e){r(e)}},n=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);o((t=t.apply(undefined,null)).next())}));var t}));const z=(0,c.hg)("user/addMessageToChannel",(e=>{return void 0,t=[e],r=function*({channel:e,message:t}){return(yield A.post("/add-message-to-channel",{channel:e,message:t})).data},new Promise(((e,a)=>{var n=e=>{try{l(r.next(e))}catch(e){a(e)}},o=e=>{try{l(r.throw(e))}catch(e){a(e)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);l((r=r.apply(undefined,t)).next())}));var t,r})),T=(0,c.hg)("user/getApprovals",(()=>{return void 0,null,e=function*(){return(yield A.get("/approvals")).data},new Promise(((t,r)=>{var a=t=>{try{o(e.next(t))}catch(e){r(e)}},n=t=>{try{o(e.throw(t))}catch(e){r(e)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,n);o((e=e.apply(undefined,null)).next())}));var e})),G=(0,c.hg)("user/getChannelMessages",(e=>{return void 0,t=[e],r=function*({channel:e}){return(yield A.post("/get-channel-messages",{channel:e})).data},new Promise(((e,a)=>{var n=e=>{try{l(r.next(e))}catch(e){a(e)}},o=e=>{try{l(r.throw(e))}catch(e){a(e)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);l((r=r.apply(undefined,t)).next())}));var t,r})),R=(0,c.hg)("user/getChannels",(()=>{return void 0,null,e=function*(){return(yield A.get("/get-channels")).data},new Promise(((t,r)=>{var a=t=>{try{o(e.next(t))}catch(e){r(e)}},n=t=>{try{o(e.throw(t))}catch(e){r(e)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,n);o((e=e.apply(undefined,null)).next())}));var e})),_=(0,c.hg)("user/getInvites",(()=>{return void 0,null,e=function*(){return(yield A.get("/invites")).data},new Promise(((t,r)=>{var a=t=>{try{o(e.next(t))}catch(e){r(e)}},n=t=>{try{o(e.throw(t))}catch(e){r(e)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,n);o((e=e.apply(undefined,null)).next())}));var e})),j=(0,c.hg)("user/getFriendsAction",(()=>{return void 0,null,e=function*(){return(yield A.get("/friends")).data},new Promise(((t,r)=>{var a=t=>{try{o(e.next(t))}catch(e){r(e)}},n=t=>{try{o(e.throw(t))}catch(e){r(e)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,n);o((e=e.apply(undefined,null)).next())}));var e})),O=(0,c.oM)({name:"user",initialState:{user:void 0,users:void 0,loading:{user:!1,users:!1},error:{user:null,users:null},audioInDevice:"",audioOutDevice:"",friends:[],invites:[],approvals:[],isCall:!1,isIncomingCall:!1,isCallAccepted:!1,isCallCanceled:!1,channels:[],channelMessages:[]},reducers:{requestGetUserAction:e=>{e.loading.user=!0},successGetUserAction:(e,{payload:t})=>{e.user=t,e.loading.user=!1},failureGetUserAction:(e,{payload:t})=>{e.error.user=t,e.loading.user=!1},requestUpdateUserAction:(e,{payload:t})=>{e.loading.user=!0},successUpdateUserAction:(e,{payload:t})=>{e.user=t,e.loading.user=!1},failureUpdateUserAction:(e,{payload:t})=>{e.error.user=t,e.loading.user=!1},requestGetUsersAction:e=>{e.loading.users=!0},successGetUsersAction:(e,{payload:t})=>{e.users=t,e.loading.users=!1},failureGetUsersAction:(e,{payload:t})=>{e.error.users=t,e.loading.users=!1},setIsCall:(e,{payload:t})=>{e.isCall=t},setIsIncomingCall:(e,{payload:t})=>{e.isIncomingCall=t},setIsCallAccepted:(e,{payload:t})=>{e.isCallAccepted=t},setIsCallCanceled:(e,{payload:t})=>{e.isCallCanceled=t},setAudioInDevice:(e,{payload:t})=>{e.audioInDevice=t},setAudioOutDevice:(e,{payload:t})=>{e.audioOutDevice=t}},extraReducers:e=>{e.addCase(j.fulfilled,((e,{payload:t})=>{e.friends=t})),e.addCase(_.fulfilled,((e,{payload:t})=>{e.invites=t})),e.addCase(T.fulfilled,((e,{payload:t})=>{e.approvals=t})),e.addCase(R.fulfilled,((e,{payload:t})=>{e.channels=t})),e.addCase(G.fulfilled,((e,{payload:t})=>{e.channelMessages=t})),e.addCase(z.fulfilled,((e,{payload:t})=>{e.channelMessages=[...e.channelMessages,t]}))}}),{setIsCall:P,setIsIncomingCall:M,setIsCallAccepted:D,setIsCallCanceled:$,requestGetUserAction:W,successGetUserAction:B,failureGetUserAction:U,requestUpdateUserAction:N,successUpdateUserAction:q,failureUpdateUserAction:L,setAudioInDevice:F,setAudioOutDevice:V,requestGetUsersAction:Y,successGetUsersAction:H,failureGetUsersAction:J}=O.actions,K=O.reducer;var Q=r(4857);const X="/user",ee=()=>A.request({method:"GET",url:X}),te=e=>A.request({method:"PATCH",url:X,data:e}),re=()=>A.request({method:"GET",url:"/users"}),ae=function*(){try{const e=yield(0,Q.RE)(ee);yield(0,Q.gz)(B(e.data))}catch(e){console.error(e),yield(0,Q.gz)(U(e))}},ne=function*({payload:e}){try{const t=yield(0,Q.RE)(te,e);yield(0,Q.gz)(q(t.data))}catch(e){console.error(e),yield(0,Q.gz)(L(e))}},oe=function*(){try{const e=yield(0,Q.RE)(re);yield(0,Q.gz)(H(e.data))}catch(e){console.error(e)}},le={Registration:"/registration",Authorization:"/authorization",Refresh:`${m}/api/refresh`,Logout:"/logout"},ie=e=>A.request({method:"POST",url:le.Registration,data:e}),ce=e=>A.request({method:"POST",url:le.Authorization,data:e}),se=()=>p().request({method:"GET",url:le.Refresh,withCredentials:!0}),de=()=>A.request({method:"GET",url:le.Logout}),pe=function*({payload:e}){try{const t=yield(0,Q.RE)(ie,e);yield(0,Q.gz)(f({access_token:t.data.access_token}))}catch(e){console.error(e),yield(0,Q.gz)(h({error:e}))}},me=function*({payload:e}){try{const t=yield(0,Q.RE)(ce,e);yield(0,Q.gz)(E({access_token:t.data.access_token}))}catch(e){console.error(e),yield(0,Q.gz)(b({error:e}))}},ue=function*(){try{const e=yield(0,Q.RE)(se);yield(0,Q.gz)(Z({access_token:e.data.access_token}))}catch(e){console.error(e),yield(0,Q.gz)(C({error:e}))}},ge=function*(){try{yield(0,Q.RE)(de),yield(0,Q.gz)(w())}catch(e){console.error(e),yield(0,Q.gz)(S({error:e}))}},xe=[function*(){yield(0,Q.$6)([(0,Q.ib)(v.type,me),(0,Q.ib)(y.type,ue),(0,Q.ib)(x.type,pe),(0,Q.ib)(k.type,ge)])},function*(){yield(0,Q.$6)([(0,Q.ib)(W.type,ae),(0,Q.ib)(N.type,ne),(0,Q.ib)(Y.type,oe)])}],fe=(0,s.ZP)(),he=(0,c.xC)({reducer:{authorization:I,user:K},middleware:[fe]});fe.run((function*(){yield(0,Q.$6)(xe.map((e=>(0,Q.rM)(e))))}));var ve=r(7294),Ee=r(6974),be=r(1797),ye=r(7294),Ze=Object.defineProperty,Ce=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Se=(e,t,r)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ie=(0,ve.memo)((e=>{var t=((e,t)=>{var r={};for(var a in e)ke.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&Ce)for(var a of Ce(e))t.indexOf(a)<0&&we.call(e,a)&&(r[a]=e[a]);return r})(e,[]);return ye.createElement(be.Z,((e,t)=>{for(var r in t||(t={}))ke.call(t,r)&&Se(e,r,t[r]);if(Ce)for(var r of Ce(t))we.call(t,r)&&Se(e,r,t[r]);return e})({},t))}));var Ae=r(1508),ze=r(2658),Te=r(270),Ge=r(6867),Re=r(6634),_e=r(5697),je=r(2186),Oe=r(4345),Pe=r(4128);const Me=(0,Oe.Z)({palette:{primary:{light:Pe.Z.A400,main:Pe.Z[500],dark:Pe.Z[800]}}}),De=r.p+"assets/images/authorization-image.6642b50856b9fc50fde3936da1774bf9.jpg";var $e=r(7294);const We=(0,ve.memo)((({children:e})=>$e.createElement(Ae.Z,{sx:{display:"grid",alignItems:"center",justifyContent:"center",height:"100%"}},e)));var Be=r(6236),Ue=r(7294);const Ne=(0,ve.memo)((()=>{const e=(0,n.I0)(),t=(0,Ee.s0)(),{loading:r}=(0,n.v9)((e=>e.authorization)),[a,o]=(0,ve.useState)(""),[l,c]=(0,ve.useState)(""),[s,d]=(0,ve.useState)(!1);return Ue.createElement(We,null,Ue.createElement(Ae.Z,{sx:{display:"grid",width:"920px",gridTemplateColumns:"448px 472px",borderRadius:"20px",border:`1px solid ${Me.palette.grey[300]}`,overflow:"hidden"}},Ue.createElement(Ae.Z,null,Ue.createElement("img",{className:i.iv`
              width: 100%;
              height: 100%;
              object-fit: cover;
            `,src:De,alt:"Илюстрация."})),Ue.createElement(Ae.Z,{sx:{padding:"48px 56px",backgroundColor:`${Me.palette.common.white}`}},Ue.createElement(Ae.Z,{sx:{display:"grid",rowGap:"16px"}},Ue.createElement(Ae.Z,{sx:{display:"grid",rowGap:"32px"}},Ue.createElement(Ae.Z,{sx:{display:"grid",rowGap:"32px"}},Ue.createElement(ze.Z,{variant:"h5"},"Войти в свой профиль"),Ue.createElement(Ae.Z,{sx:{display:"grid",rowGap:"24px"}},Ue.createElement(Ie,{type:"email",id:"email",name:"email",label:"Адрес электронной почты",value:a,onChange:e=>o(e.target.value),placeholder:"Введите ваш email",autoComplete:"off",fullWidth:!0}),Ue.createElement(Ie,{type:s?"text":"password",id:"password",name:"password",label:"Пароль",value:l,onChange:e=>c(e.target.value),placeholder:"Введите ваш пароль",autoComplete:"off",fullWidth:!0,InputProps:{endAdornment:Ue.createElement(Te.Z,{position:"end"},Ue.createElement(Ge.Z,{onClick:()=>d(!s)},s?Ue.createElement(_e.Z,null):Ue.createElement(je.Z,null)))}}))),Ue.createElement(Be.Z,{variant:"contained",color:"primary",size:"large",loading:r.access_token,onClick:()=>{e(v({email:a,password:l}))}},"Войти")),Ue.createElement(ze.Z,{variant:"subtitle2"},"У Вас ещё нет профиля?"," ",Ue.createElement(Re.Z,{sx:{cursor:"pointer"},underline:"hover",onClick:e=>{e.preventDefault(),t("/registration")}},"Зарегистрироваться"))))))}));var qe=r(7294);const Le=(0,ve.memo)((()=>{const e=(0,n.I0)(),t=(0,Ee.s0)(),{loading:r,error:a}=(0,n.v9)((e=>e.authorization)),[o,l]=(0,ve.useState)(""),[c,s]=(0,ve.useState)(""),[d,p]=(0,ve.useState)(""),[m,g]=(0,ve.useState)(!1);return(0,ve.useEffect)((()=>{var e,t;console.log({error:a}),null==(t=null==(e=null==a?void 0:a.access_token)?void 0:e.errors)||t.forEach((e=>{u.Am.error(e.msg)}))}),[a]),qe.createElement(We,null,qe.createElement(Ae.Z,{sx:{display:"grid",width:"920px",gridTemplateColumns:"448px 472px",borderRadius:"20px",border:`1px solid ${Me.palette.grey[300]}`,overflow:"hidden"}},qe.createElement(Ae.Z,null,qe.createElement("img",{className:i.iv`
              width: 100%;
              height: 100%;
              object-fit: cover;
            `,src:De,alt:"Илюстрация."})),qe.createElement(Ae.Z,{sx:{padding:"48px 56px",backgroundColor:`${Me.palette.common.white}`}},qe.createElement(Ae.Z,{sx:{display:"grid",rowGap:"16px"}},qe.createElement(Ae.Z,{sx:{display:"grid",rowGap:"24px"}},qe.createElement(Ae.Z,{sx:{display:"grid",rowGap:"32px"}},qe.createElement(ze.Z,{variant:"h5"},"Создать учётную запись"),qe.createElement(Ae.Z,{sx:{display:"grid",rowGap:"24px"}},qe.createElement(be.Z,{type:"email",id:"email",name:"email",label:"Адрес электронной почты",value:o,onChange:e=>l(e.target.value),placeholder:"Введите ваш email",autoComplete:"off",fullWidth:!0}),qe.createElement(be.Z,{type:"text",id:"name",name:"name",label:"Имя пользователя",value:c,onChange:e=>s(e.target.value),placeholder:"Введите ваше имя",autoComplete:"off",fullWidth:!0}),qe.createElement(be.Z,{type:m?"text":"password",id:"password",name:"password",label:"Пароль",value:d,onChange:e=>p(e.target.value),placeholder:"Введите ваш пароль",autoComplete:"off",fullWidth:!0,InputProps:{endAdornment:qe.createElement(Te.Z,{position:"end"},qe.createElement(Ge.Z,{onClick:()=>g(!m)},m?qe.createElement(_e.Z,null):qe.createElement(je.Z,null)))}}))),qe.createElement(Ae.Z,{sx:{display:"grid",rowGap:"32px"}},qe.createElement(ze.Z,{variant:"caption",color:Me.palette.grey[500]},"Регистрируясь, Вы соглашаетесь с"," ",qe.createElement(Re.Z,{sx:{cursor:"pointer"},underline:"hover"},"политикой обработки персональных данных")),qe.createElement(Be.Z,{variant:"contained",color:"primary",size:"large",loading:r.access_token,onClick:()=>e(x({email:o,name:c,password:d}))},"Зарегистрироваться"))),qe.createElement(ze.Z,{variant:"subtitle2"},qe.createElement(Re.Z,{sx:{cursor:"pointer"},underline:"hover",onClick:e=>{e.preventDefault(),t("/authorization")}},"Уже зарегистрированы?"))))))}));var Fe=r(7294);const Ve=(0,ve.memo)((()=>Fe.createElement(Ee.Z5,null,Fe.createElement(Ee.AW,{path:"authorization",element:Fe.createElement(Ne,null)}),Fe.createElement(Ee.AW,{path:"registration",element:Fe.createElement(Le,null)}),Fe.createElement(Ee.AW,{path:"*",element:Fe.createElement(Ee.Fg,{to:"authorization"})}))));var Ye=r(6914),He=r(7294),Je=Object.defineProperty,Ke=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,et=(e,t,r)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const tt=(0,ve.memo)((e=>{var t=e,{children:r}=t,a=((e,t)=>{var r={};for(var a in e)Qe.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&Ke)for(var a of Ke(e))t.indexOf(a)<0&&Xe.call(e,a)&&(r[a]=e[a]);return r})(t,["children"]);return He.createElement(Ye.Z,((e,t)=>{for(var r in t||(t={}))Qe.call(t,r)&&et(e,r,t[r]);if(Ke)for(var r of Ke(t))Xe.call(t,r)&&et(e,r,t[r]);return e})({disableElevation:!0},a),r)}));var rt=r(2855),at=r(4433),nt=r(5683),ot=r(6454),lt=r(7720),it=r(7294);const ct=(0,ve.memo)((()=>{const e=(0,Ee.s0)();return it.createElement(Ae.Z,{sx:{display:"grid",rowGap:"24px",height:"100%",alignContent:"start",padding:"25px 16px",justifyContent:"center"}},it.createElement(Ae.Z,{sx:{display:"grid",rowGap:"16px"}},it.createElement(ot.Z,{title:"Друзья",arrow:!0,placement:"right"},it.createElement(Ae.Z,{sx:{display:"grid",padding:"8px",backgroundColor:Me.palette.grey[400],cursor:"pointer",borderRadius:"8px",justifyContent:"center",width:"40px"},onClick:()=>e("/friends")},it.createElement(rt.Z,null))),it.createElement(ot.Z,{title:"Каналы",arrow:!0,placement:"right"},it.createElement(Ae.Z,{sx:{display:"grid",padding:"8px",backgroundColor:Me.palette.grey[400],cursor:"pointer",borderRadius:"8px",justifyContent:"center",width:"40px"},onClick:()=>e("/channels")},it.createElement(at.Z,null)))),it.createElement(lt.Z,null),it.createElement(ot.Z,{title:"Настройки",arrow:!0,placement:"right"},it.createElement(Ae.Z,{sx:{display:"grid",padding:"8px",backgroundColor:Me.palette.grey[400],cursor:"pointer",borderRadius:"8px",justifyContent:"center",width:"40px"},onClick:()=>e("/settings")},it.createElement(nt.Z,null))))}));var st=r(9346),dt=r(7109),pt=r(720),mt=r(251);const ut=(0,r(3213).io)(m,{transports:["websocket"]}),gt=e=>e.user.user,xt=e=>e.user.users,ft=e=>e.user.friends,ht=e=>e.user.invites,vt=e=>e.user.approvals,Et=e=>e.user.channelMessages;var bt=r(7294);const yt=(0,ve.memo)((({name:e,status:t,channelId:r})=>{const a=(0,n.v9)(gt),o=(0,Ee.s0)();return bt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr max-content",columnGap:"8px",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",":hover":{backgroundColor:Me.palette.grey[300],".delete-icon":{display:"grid"}},".MuiBadge-badge":{border:`1px solid ${Me.palette.common.white}`},".MuiBadge-colorSuccess":{backgroundColor:Me.palette.success.light},".MuiBadge-colorError":{backgroundColor:Me.palette.error.light}},onClick:()=>{ut.emit("on-channel-join",r,null==a?void 0:a.id),o("/messages")}},bt.createElement(st.Z,{overlap:"circular",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"online"===t?"success":"error"},bt.createElement(dt.Z,{sx:{backgroundColor:pt.Z[500]}})),bt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content"}},bt.createElement(ze.Z,{variant:"body2"},e||""),bt.createElement(ze.Z,{variant:"caption"},"В сети")),bt.createElement(Ae.Z,{className:"delete-icon",sx:{display:"none"}},bt.createElement(Ge.Z,null,bt.createElement(mt.Z,{sx:{color:Me.palette.grey[700]}}))))}));var Zt=r(3996),Ct=r(5338),kt=r(5838),wt=r(3847),St=r(7294);const It=(0,ve.memo)((()=>{const e=(0,n.v9)(gt),[t,r]=(0,ve.useState)(!1),[a,o]=(0,ve.useState)(!1);return St.createElement(Ae.Z,{sx:{display:"grid",alignItems:"center",backgroundColor:Me.palette.grey[300],padding:"12px 20px"}},St.createElement(Ae.Z,{sx:{display:"grid",columnGap:"8px",gridTemplateColumns:"40px 1fr 96px"}},St.createElement(Ae.Z,{sx:{".MuiBadge-badge":{border:`1px solid ${Me.palette.common.white}`},".MuiBadge-colorSuccess":{backgroundColor:Me.palette.success.light},".MuiBadge-colorError":{backgroundColor:Me.palette.error.light}}},St.createElement(st.Z,{overlap:"circular",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"online"===(null==e?void 0:e.status)?"success":"error"},St.createElement(dt.Z,{sx:{backgroundColor:(null==e?void 0:e.color)?e.color:null==e?void 0:e.default_color},src:null==e?void 0:e.image}))),St.createElement(Ae.Z,null,St.createElement(ze.Z,{variant:"body2"},null==e?void 0:e.name),St.createElement(ze.Z,{sx:{color:Me.palette.grey[500]},variant:"caption"},"#",null==e?void 0:e.id.slice(-4))),St.createElement(Ae.Z,{sx:{display:"grid",columnGap:"16px",gridTemplateColumns:"repeat(2, 40px)",alignItems:"center"}},St.createElement(Ge.Z,{onClick:()=>r(!t)},t?St.createElement(Zt.Z,{sx:{color:Me.palette.grey[700]}}):St.createElement(Ct.Z,{sx:{color:Me.palette.grey[700]}})),St.createElement(Ge.Z,{onClick:()=>o(!a)},a?St.createElement(kt.Z,{sx:{color:Me.palette.grey[700]}}):St.createElement(wt.Z,{sx:{color:Me.palette.grey[700]}})))))}));var At=r(7294);const zt=(0,ve.memo)((()=>{const e=(0,Ee.s0)(),{pathname:t}=(0,Ee.TH)(),[r,a]=(0,ve.useState)();return(0,ve.useEffect)((()=>{}),[]),At.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"72px 376px 1fr",height:"100%",backgroundColor:Me.palette.common.white}},At.createElement(Ae.Z,{sx:{backgroundColor:Me.palette.grey[200]}},At.createElement(ct,null)),At.createElement(Ae.Z,{sx:{display:"grid",gridTemplateRows:"72px max-content 1fr 64px",backgroundColor:Me.palette.grey[400],overflow:"hidden"}},At.createElement(Ae.Z,{sx:{padding:"24px 20px",borderBottom:`1px solid ${Me.palette.grey[600]}`}},At.createElement(ze.Z,{variant:"h6"},"Личные сообщения")),At.createElement(Ae.Z,{sx:{padding:"16px"}},At.createElement(tt,{fullWidth:!0,variant:"contained",onClick:()=>e("/friends")},"Друзья")),At.createElement(Ae.Z,{sx:{margin:"28px 4px",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:Me.palette.grey[300],border:`1px solid ${Me.palette.grey[500]}`,borderRadius:"8px"}}},At.createElement(Ae.Z,{sx:{display:"grid",rowGap:"12px",padding:"0 4px"}},null==r?void 0:r.map((e=>At.createElement(yt,{key:e.userData._id,id:e.userData._id,name:e.userData.name,status:e.userData.status,email:e.userData.email,channelId:e.value._id}))))),At.createElement(It,null)),At.createElement(Ae.Z,{sx:{display:"grid",gridTemplateRows:"72px 1fr",backgroundColor:Me.palette.grey[500],overflow:"hidden"}},At.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",columnGap:"24px",padding:"16px 24px",borderBottom:`1px solid ${Me.palette.grey[400]}`,alignItems:"center"}},At.createElement(ze.Z,{variant:"h6"},"Друзья"),At.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(5, max-content)",columnGap:"8px"}},At.createElement(tt,{variant:t.includes("all-users")?"contained":"outlined",color:"primary",onClick:()=>e("all-users")},"Все пользователи"),At.createElement(tt,{variant:t.includes("friends-online")?"contained":"outlined",color:"primary",onClick:()=>e("friends-online")},"В сети"),At.createElement(tt,{variant:t.includes("friends-invites")?"contained":"outlined",color:"primary",onClick:()=>e("friends-invites")},"Заявки"),At.createElement(tt,{variant:t.includes("friends-approvals")?"contained":"outlined",color:"primary",onClick:()=>e("friends-approvals")},"Ожидание"),At.createElement(tt,{variant:t.includes("add-to-friends")?"contained":"outlined",color:"success",onClick:()=>e("add-to-friends")},"Добавить в друзья"))),At.createElement(Ee.j3,null)))}));var Tt=r(7294);const Gt=(0,ve.memo)((()=>{const e=(0,Ee.s0)(),t=(0,n.v9)(gt),r=(0,n.I0)(),a=(0,n.v9)(Et),[o,l]=(0,ve.useState)(),[i,c]=(0,ve.useState)(""),[s,d]=(0,ve.useState)("");return(0,ve.useEffect)((()=>{ut.on("on-channel-join",((e,t)=>{console.log("Сообщение в канале:",e),d(t),t&&r(G({channel:t}))})),s&&r(G({channel:s})),ut.on("on-message",(e=>{e&&r(G({channel:e}))}))}),[]),Tt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"72px 376px 1fr",height:"100%",backgroundColor:Me.palette.common.white}},Tt.createElement(Ae.Z,{sx:{backgroundColor:Me.palette.grey[200]}},Tt.createElement(ct,null)),Tt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateRows:"72px max-content 1fr 64px",backgroundColor:Me.palette.grey[400],overflow:"hidden"}},Tt.createElement(Ae.Z,{sx:{padding:"24px 20px",borderBottom:`1px solid ${Me.palette.grey[600]}`}},Tt.createElement(ze.Z,{variant:"h6"},"Личные сообщения")),Tt.createElement(Ae.Z,{sx:{padding:"16px"}},Tt.createElement(tt,{fullWidth:!0,variant:"contained",onClick:()=>e("/friends/all-friends")},"Друзья")),Tt.createElement(Ae.Z,{sx:{margin:"28px 4px",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:Me.palette.grey[300],border:`1px solid ${Me.palette.grey[500]}`,borderRadius:"8px"}}},Tt.createElement(Ae.Z,{sx:{display:"grid",rowGap:"12px",padding:"0 4px"}},null==o?void 0:o.map((e=>Tt.createElement(yt,{key:e.userData._id,id:e.userData._id,name:e.userData.name,status:e.userData.status,email:e.userData.email,channelId:e.value._id}))))),Tt.createElement(It,null)),Tt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateRows:"1fr",backgroundColor:Me.palette.grey[500],overflow:"hidden"}},Tt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateRows:"1fr max-content",rowGap:"16px",margin:"24px 16px",backgroundColor:Me.palette.common.white,borderRadius:"8px",padding:"16px",overflow:"hidden"}},Tt.createElement(Ae.Z,{sx:{display:"grid",padding:"8px",overflow:"hidden",gridTemplateRows:"max-content 1fr",rowGap:"16px"}},Tt.createElement(ze.Z,null,"Сообщения:"),Tt.createElement(Ae.Z,{sx:{display:"grid",overflow:"scroll",rowGap:"8px",alignContent:"start",height:"100%"}},null==a?void 0:a.map((e=>Tt.createElement(Ae.Z,{key:e._id,sx:{padding:"8px",border:"1px solid #000000",display:"grid",borderRadius:"8px"}},Tt.createElement(yt,{id:e._id,name:e.author.name,status:e.author.status,email:e.author.email}),Tt.createElement(ze.Z,null,e.text)))))),Tt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"1fr max-content",columnGap:"16px"}},Tt.createElement(Ie,{type:"text",id:"message",name:"message",label:"Сообщение",value:i,onChange:e=>c(e.target.value),placeholder:"Введите текст сообщения"}),Tt.createElement(tt,{variant:"contained",color:"primary",onClick:()=>{s&&i&&(ut.emit("on-message",s,i,null==t?void 0:t.id),c(""))}},"Отправить сообщение"))),Tt.createElement(Ee.j3,null)))}));var Rt=r(7294);const _t=(0,ve.memo)((()=>{const e=(0,Ee.s0)(),t=(0,Ee.TH)(),r=(0,n.I0)(),{user:a}=(0,n.v9)((e=>e.user)),o=[{id:1,title:"Моя учётная запись",path:"user-account",onClick:()=>{e("user-account")},divider:!1},{id:2,title:"Профиль пользователя",path:"user-profile",onClick:()=>{e("user-profile")},divider:!1},{id:3,title:"Голос и видео",path:"voice-and-video",onClick:()=>{e("voice-and-video")},divider:!1},{id:4,title:"Выйти",path:"logout",onClick:()=>{r(k()),(null==a?void 0:a.id)&&ut.emit("on-disconnect",a.id),ut.close()},divider:!0}];return Rt.createElement(Ae.Z,{sx:{padding:"60px 8px",backgroundColor:"#43454a"}},Rt.createElement(ze.Z,{className:i.iv`
          padding: 6px 10px !important;
          font-weight: 700 !important;
          font-size: 12px !important;
          line-height: 16px !important;
          color: #a0a2a6;
          text-transform: uppercase;
        `},"Настройки пользователя"),Rt.createElement(Ae.Z,{component:"ul",className:i.iv`
          display: grid;
          margin: 0;
          padding: 0;
          list-style: none;
          row-gap: 2px;
        `},o.map((e=>Rt.createElement(Rt.Fragment,null,e.divider&&Rt.createElement(lt.Z,{sx:{borderColor:"rgba(255, 255, 255, 0.25)",margin:"8px 10px"}}),Rt.createElement(Ae.Z,{key:e.id,component:"li",className:i.iv`
                  padding: 6px 10px !important;
                  font-weight: 500 !important;
                  font-size: 16px !important;
                  line-height: 20px !important;
                  background-color: ${t.pathname.includes(e.path)?"#60656c":"none"};
                  border-radius: 4px;
                  cursor: pointer;

                  &:hover,
                  &:focus {
                    background-color: ${t.pathname.includes(e.path)?"#565a61":"#87888d"};

                    p {
                      color: #dfe0e1;
                    }
                  }
                `,onClick:e.onClick},Rt.createElement(Re.Z,{underline:"none"},Rt.createElement(ze.Z,{sx:{color:t.pathname.includes(e.path)?"#ffffff":"#a0a2a6"}},e.title))))))),Rt.createElement(ze.Z,{className:i.iv`
          padding: 6px 10px !important;
          font-weight: 700 !important;
          font-size: 12px !important;
          line-height: 16px !important;
          color: #a0a2a6;
          text-transform: uppercase;
        `},"Настройки приложения"))}));var jt=r(7294);const Ot=(0,ve.memo)((()=>{const e=(0,Ee.s0)();return(0,ve.useEffect)((()=>{e("user-account")}),[]),jt.createElement(Ae.Z,{sx:{display:"grid",width:"100%",height:"100%",backgroundColor:Me.palette.grey[500]}},jt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"224px 740px",height:"100%",justifyContent:"center",backgroundImage:"linear-gradient(to right, #43454a 50%, #5e6065 50%)"}},jt.createElement(_t,null),jt.createElement(Ee.j3,null)))}));var Pt=r(7294);const Mt=(0,ve.memo)((()=>Pt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"72px 376px 1fr",height:"100%",backgroundColor:Me.palette.common.white}},Pt.createElement(Ae.Z,{sx:{backgroundColor:Me.palette.grey[200]}},Pt.createElement(ct,null)),Pt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateRows:"72px 1fr 64px",backgroundColor:Me.palette.grey[400],overflow:"hidden"}},Pt.createElement(Ae.Z,{sx:{padding:"24px 20px",borderBottom:`1px solid ${Me.palette.grey[600]}`}},Pt.createElement(ze.Z,{variant:"h6"},"Каналы")),Pt.createElement(Ae.Z,{sx:{padding:"0 8px",margin:"28px 0",overflow:"scroll"}},Pt.createElement(Ae.Z,{sx:{display:"grid",rowGap:"12px"}},Array.from(Array(25).keys()).map((e=>Pt.createElement(Ae.Z,{key:e}))))),Pt.createElement(It,null)),Pt.createElement(Ae.Z,{sx:{backgroundColor:Me.palette.grey[600]}}))));var Dt=r(7294);const $t=(0,ve.memo)((()=>Dt.createElement(Mt,null)));var Wt=r(4125),Bt=r(1753),Ut=r(8416),Nt=r(6046),qt=r(7003),Lt=r(7294);const Ft=(0,ve.memo)((({id:e,name:t,status:r,image:a})=>{const[n,o]=(0,ve.useState)(null);return Lt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr",alignItems:"center"}},Lt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr",columnGap:"8px",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",".MuiBadge-badge":{border:`1px solid ${Me.palette.common.white}`},".MuiBadge-colorSuccess":{backgroundColor:Me.palette.success.light},".MuiBadge-colorError":{backgroundColor:Me.palette.error.light}}},Lt.createElement(st.Z,{overlap:"circular",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"online"===r?"success":"error"},Lt.createElement(dt.Z,{sx:{backgroundColor:pt.Z[500]},src:a})),Lt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content"}},Lt.createElement(ze.Z,{variant:"body2"},t||""),Lt.createElement(ze.Z,{variant:"caption"},"online"===r?"В сети":"Не в сети"))),Lt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 24px)",columnGap:"24px",alignItems:"center",justifyContent:"end"}},Lt.createElement(Ae.Z,{sx:{cursor:"pointer"}},Lt.createElement(Ut.Z,null)),Lt.createElement(Ae.Z,{sx:{cursor:"pointer"}},Lt.createElement(Nt.Z,null)),Lt.createElement(Ae.Z,{sx:{cursor:"pointer"},onClick:e=>o(e.currentTarget)},Lt.createElement(qt.Z,null))),Lt.createElement(Wt.Z,{anchorEl:n,open:Boolean(n),onClose:()=>o(null),MenuListProps:{"aria-labelledby":"basic-button"}},Lt.createElement(Bt.Z,{onClick:()=>o(null)},"Написать"),Lt.createElement(Bt.Z,{onClick:()=>o(null)},"Позвонить"),Lt.createElement(Bt.Z,{onClick:()=>{return void 0,null,t=function*(){o(null);const t=yield A.post("/remove-from-friends",{friendId:e});return ut.emit("on-remove-from-friends",e),t.data},new Promise(((e,r)=>{var a=e=>{try{o(t.next(e))}catch(e){r(e)}},n=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);o((t=t.apply(undefined,null)).next())}));var t}},"Удалить из друзей")))}));var Vt=r(7294);const Yt=(0,ve.memo)((()=>{const e=(0,n.I0)(),{users:t}=(0,n.v9)((e=>e.user));return(0,ve.useEffect)((()=>{e(Y()),ut.on("on-connect",(()=>{e(Y())})),ut.on("on-disconnect",(()=>{e(Y())}))}),[]),Vt.createElement(Ae.Z,{sx:{padding:"0 8px 0 16px",margin:"16px 8px 16px 0",display:"grid",alignContent:"start",rowGap:"8px",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:Me.palette.grey[300],border:`1px solid ${Me.palette.grey[500]}`,borderRadius:"8px"}}},Vt.createElement(Ae.Z,{sx:{padding:"8px 12px"}},Vt.createElement(ze.Z,{variant:"h6"},"Все пользователи: ",t&&(null==t?void 0:t.length)>0?null==t?void 0:t.length:0)),Vt.createElement(Ae.Z,{sx:{display:"grid",alignContent:"start",rowGap:"8px"}},null==t?void 0:t.map((e=>Vt.createElement(Ft,{key:e.id,id:e.id,name:e.name,status:e.status,image:e.image})))))}));var Ht=r(7294);const Jt=(0,ve.memo)((()=>{const e=(0,n.v9)(ft);return Ht.createElement(Ae.Z,{sx:{padding:"0 8px 0 16px",margin:"16px 8px 16px 0",display:"grid",alignContent:"start",rowGap:"8px",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:Me.palette.grey[300],border:`1px solid ${Me.palette.grey[500]}`,borderRadius:"8px"}}},e.map((e=>"online"===e.status?Ht.createElement(Ft,{key:e.id,id:e.id,name:e.name,status:e.status,image:e.image}):null)))}));var Kt=r(7294),Qt=(e,t,r)=>new Promise(((a,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},l=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,l);i((r=r.apply(e,t)).next())}));const Xt=(0,ve.memo)((({id:e,name:t,status:r})=>Kt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr",alignItems:"center"}},Kt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr",columnGap:"8px",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",".MuiBadge-badge":{border:`1px solid ${Me.palette.common.white}`},".MuiBadge-colorSuccess":{backgroundColor:Me.palette.success.light},".MuiBadge-colorError":{backgroundColor:Me.palette.error.light}}},Kt.createElement(st.Z,{overlap:"circular",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"online"===r?"success":"error"},Kt.createElement(dt.Z,{sx:{backgroundColor:pt.Z[500]}})),Kt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content"}},Kt.createElement(ze.Z,{variant:"body2"},t||""),Kt.createElement(ze.Z,{variant:"caption"},"online"===r?"В сети":"Не в сети"))),Kt.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",columnGap:"24px",alignItems:"center",justifyContent:"end"}},Kt.createElement(tt,{variant:"contained",color:"primary",onClick:()=>Qt(void 0,null,(function*(){const t=yield A.post("/add-to-friends",{friendId:e});return ut.emit("on-add-to-friends",e),t.data}))},"Добавить"),Kt.createElement(tt,{variant:"contained",color:"primary",onClick:()=>Qt(void 0,null,(function*(){const t=yield A.post("/remove-invite-to-friends",{friendId:e});return ut.emit("on-remove-invite-to-friends",e),t.data}))},"Отклонить")))));var er=r(7294);const tr=(0,ve.memo)((()=>{const e=(0,n.v9)(ht);return er.createElement(Ae.Z,{sx:{padding:"0 8px 0 16px",margin:"16px 8px 16px 0",display:"grid",alignContent:"start",rowGap:"8px",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:Me.palette.grey[300],border:`1px solid ${Me.palette.grey[500]}`,borderRadius:"8px"}}},e.map((e=>er.createElement(Xt,{key:e.id,id:e.id,name:e.name,status:e.status}))))}));var rr=r(7294);const ar=(0,ve.memo)((({id:e,name:t,status:r})=>rr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr",alignItems:"center"}},rr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr",columnGap:"8px",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",".MuiBadge-badge":{border:`1px solid ${Me.palette.common.white}`},".MuiBadge-colorSuccess":{backgroundColor:Me.palette.success.light},".MuiBadge-colorError":{backgroundColor:Me.palette.error.light}}},rr.createElement(st.Z,{overlap:"circular",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"online"===r?"success":"error"},rr.createElement(dt.Z,{sx:{backgroundColor:pt.Z[500]}})),rr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content"}},rr.createElement(ze.Z,{variant:"body2"},t||""),rr.createElement(ze.Z,{variant:"caption"},"online"===r?"В сети":"Не в сети"))),rr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",columnGap:"24px",alignItems:"center",justifyContent:"end"}},rr.createElement(ze.Z,{variant:"body1"},"Ожидает добавления в друзья"),rr.createElement(tt,{variant:"contained",color:"primary",onClick:()=>{return void 0,null,t=function*(){const t=yield A.post("/remove-invite-to-friends",{friendId:e});return ut.emit("on-remove-invite-to-friends",e),t.data},new Promise(((e,r)=>{var a=e=>{try{o(t.next(e))}catch(e){r(e)}},n=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);o((t=t.apply(undefined,null)).next())}));var t}},"Отклонить")))));var nr=r(7294);const or=(0,ve.memo)((()=>{const e=(0,n.v9)(vt);return nr.createElement(Ae.Z,{sx:{padding:"0 8px 0 16px",margin:"16px 8px 16px 0",display:"grid",alignContent:"start",rowGap:"8px",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:Me.palette.grey[300],border:`1px solid ${Me.palette.grey[500]}`,borderRadius:"8px"}}},e.map((e=>nr.createElement(ar,{key:e.id,id:e.id,name:e.name,status:e.status}))))}));var lr=r(7294);const ir=(0,ve.memo)((({id:e,name:t,status:r,setSearchValue:a})=>lr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr",alignItems:"center"}},lr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr",columnGap:"8px",alignItems:"center",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",".MuiBadge-badge":{border:`1px solid ${Me.palette.common.white}`},".MuiBadge-colorSuccess":{backgroundColor:Me.palette.success.light},".MuiBadge-colorError":{backgroundColor:Me.palette.error.light}}},lr.createElement(st.Z,{overlap:"circular",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},color:"online"===r?"success":"error"},lr.createElement(dt.Z,{sx:{backgroundColor:pt.Z[500]}})),lr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content"}},lr.createElement(ze.Z,{variant:"body2"},t||""),lr.createElement(ze.Z,{variant:"caption"},"online"===r?"В сети":"Не в сети"))),lr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(1, max-content)",columnGap:"24px",alignItems:"center",justifyContent:"end"}},lr.createElement(tt,{variant:"contained",color:"primary",onClick:()=>{return void 0,null,t=function*(){a("");const t=yield A.post("/add-invite-to-friends",{friendId:e});return ut.emit("on-add-invite-to-friends",e),t.data},new Promise(((e,r)=>{var a=e=>{try{o(t.next(e))}catch(e){r(e)}},n=e=>{try{o(t.throw(e))}catch(e){r(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,n);o((t=t.apply(undefined,null)).next())}));var t}},"Добавить в друзья")))));var cr=r(7294);const sr=(0,ve.memo)((()=>{(0,n.I0)();const e=(0,n.v9)(xt),[t,r]=(0,ve.useState)("");return(0,ve.useEffect)((()=>{}),[t]),cr.createElement(Ae.Z,{sx:{padding:"0 8px 0 16px",margin:"16px 8px 16px 0"}},cr.createElement(Ie,{fullWidth:!0,size:"small",placeholder:"Поиск по друзьям",value:t,onChange:e=>r(e.target.value)}),cr.createElement(Ae.Z,{sx:{padding:"0 8px 0 16px",margin:"16px 8px 16px 0",display:"grid",alignContent:"start",rowGap:"8px",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"none"},"&::-webkit-scrollbar-thumb":{backgroundColor:Me.palette.grey[300],border:`1px solid ${Me.palette.grey[500]}`,borderRadius:"8px"}}},null==e?void 0:e.map((e=>cr.createElement(ir,{key:e.id,id:e.id,name:e.name,status:e.status,setSearchValue:r})))))}));var dr=r(3816),pr=r(2026),mr=r(5196),ur=r(4399),gr=r(3546),xr=r(9986),fr=r(4776),hr=(e,t,r)=>new Promise(((a,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},l=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,l);i((r=r.apply(e,t)).next())})),vr=r(7294);const Er=(0,ve.memo)((()=>{const e=(0,Ee.s0)(),t=(0,n.I0)(),r=(0,n.v9)(gt),[a,o]=(0,ve.useState)(""),[l,c]=(0,ve.useState)(null==r?void 0:r.image),[s,d]=(0,ve.useState)(null==r?void 0:r.description),[p,m]=(0,ve.useState)(!0),[g,x]=(0,ve.useState)(!1),{minutes:f,seconds:h}=(()=>{const[e,t]=(0,ve.useState)(0);return(0,ve.useEffect)((()=>{const e=setInterval((()=>{t((e=>e+1))}),1e3);return()=>clearInterval(e)}),[]),{minutes:Math.floor(e/60).toString().padStart(2,"0"),seconds:Number(e-60*Math.floor(e/60)).toString().padStart(2,"0")}})(),v=(0,ve.useRef)(null);return(0,ve.useEffect)((()=>{(null==r?void 0:r.description)&&d(r.description),(null==r?void 0:r.image)&&c(r.image)}),[null==r?void 0:r.description,null==r?void 0:r.image]),(0,ve.useEffect)((()=>{const t=t=>{"Escape"===t.key&&e("friends")};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[]),(0,ve.useEffect)((()=>{""!==a||l!==(null==r?void 0:r.image)||s!==(null==r?void 0:r.description)?x(!0):x(!1)}),[a,l,s]),vr.createElement(Ae.Z,{sx:{position:"relative",display:"grid",padding:"60px 40px 80px 40px",alignContent:"start",backgroundColor:"#5e6065"}},vr.createElement(Ie,{sx:{display:"none"},type:"file",id:"image",name:"image",label:"Изображение профиля",inputProps:{ref:e=>v.current=e},onChange:e=>{const t=e.target.files?e.target.files[0]:null,r=new FileReader;t&&(r.readAsDataURL(t),r.onload=()=>{t.size>5242880&&u.Am.error("Изображение должно быть не более 5MB."),c(String(r.result))}),c(e.target.value)},placeholder:"Выберите изображение профиля",autoComplete:"off",fullWidth:!0,focused:!0}),vr.createElement(xr.Z,{key:fr.Z.name,message:"Аккуратнее, вы не сохранили изменения!",TransitionComponent:fr.Z,open:g,sx:{"&":{position:"absolute",left:"40px",transform:"none",width:"100%",".MuiSnackbarContent-root":{width:"100%"}}},onClose:(e,t)=>{"clickaway"!==t&&x(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},action:vr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",columnGap:"16px",alignItems:"center"}},vr.createElement(Re.Z,{sx:{cursor:"pointer"},underline:"hover",onClick:()=>{o(""),c(null==r?void 0:r.image),d(null==r?void 0:r.description)}},vr.createElement(ze.Z,null,"Сброс")),vr.createElement(Be.Z,{sx:{textTransform:"initial"},variant:"contained",color:"success",onClick:()=>{t(N({color:a||void 0,image:l!==(null==r?void 0:r.image)?l:void 0,description:s!==(null==r?void 0:r.description)?s:void 0})),o(""),c(null==r?void 0:r.image),d(null==r?void 0:r.description)}},"Сохранить изменения"))}),vr.createElement(ze.Z,{className:i.iv`
          padding-bottom: 20px !important;
          font-weight: 600 !important;
          font-size: 20px !important;
          line-height: 24px !important;
          color: #ffffff !important;
          border-bottom: 1px solid #000000;
        `},"Профиль пользователя"),vr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"8px",position:"absolute",top:"60px",right:"-40px",textAlign:"center",cursor:"pointer","&:hover svg, &:focus svg":{fill:"#ffffff"}},onClick:()=>e("/friends")},vr.createElement(dr.Z,{sx:{width:"36px",height:"36px",fill:"#b9bbbe"}}),vr.createElement(ze.Z,{sx:{fontSize:"13px",color:"#b9bbbe"}},"ESC")),vr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"340px 300px",columnGap:"20px",justifyContent:"space-between"}},vr.createElement(Ae.Z,null,vr.createElement(Ae.Z,{sx:{padding:"20px 0",borderBottom:"1px solid #000000"}},vr.createElement(ze.Z,{className:i.iv`
                margin-bottom: 8px !important;
                font-weight: 600 !important;
                font-size: 12px !important;
                line-height: 16px !important;
                text-transform: uppercase !important;
              `},"Аватар"),vr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",alignItems:"center",columnGap:"16px"}},vr.createElement(tt,{sx:{textTransform:"initial"},variant:"contained",onClick:()=>{v.current&&v.current.click()}},"Смена аватара"),(null==r?void 0:r.image)&&vr.createElement(Re.Z,{sx:{cursor:"pointer",color:"#ffffff",fontFamily:"sans-serif"},underline:"hover",onClick:()=>c("")},"Удалить аватар"))),vr.createElement(Ae.Z,{sx:{padding:"20px 0",borderBottom:"1px solid #000000"}},vr.createElement(ze.Z,{className:i.iv`
                margin-bottom: 8px !important;
                font-weight: 600 !important;
                font-size: 12px !important;
                line-height: 16px !important;
                text-transform: uppercase !important;
              `},"Цвет профиля"),vr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content max-content",columnGap:"16px"}},vr.createElement(Ae.Z,null,vr.createElement(Ae.Z,{sx:{display:"grid",alignItems:"center",justifyContent:"center",backgroundColor:(null==r?void 0:r.color)?r.color:null==r?void 0:r.default_color,width:"70px",height:"50px",borderRadius:"4px",cursor:"pointer"},onClick:()=>m(!0)},p&&vr.createElement(pr.Z,{sx:{fill:"#ffffff"},width:24,height:24})),vr.createElement(ze.Z,{className:i.iv`
                    font-size: 12px !important;
                    line-height: 16px !important;
                  `},"По умолчанию")),vr.createElement(Ae.Z,{sx:{position:"relative"}},vr.createElement(Ae.Z,{sx:{position:"relative",display:"grid",alignItems:"center",justifyContent:"center",backgroundColor:a,width:"70px",height:"50px",borderRadius:"4px",cursor:"pointer",border:a?"":"1px solid #000000"},onClick:()=>{o("#000000"),m(!1)}},!p&&vr.createElement(pr.Z,{sx:{fill:"#ffffff"},width:24,height:24}),vr.createElement("input",{className:i.iv`
                      position: absolute;
                      top: 0;
                      left: 0;
                      width: 100%;
                      height: 100%;
                      cursor: pointer;
                      opacity: 0;
                    `,type:"color",value:a,onChange:e=>{o(e.target.value),m(!1)}})),vr.createElement(mr.Z,{sx:{position:"absolute",top:"0",right:"8px"},width:14,height:14}),vr.createElement(ze.Z,{className:i.iv`
                    font-size: 12px !important;
                    line-height: 16px !important;
                  `},"Пользовательские"))),vr.createElement(Ae.Z,{sx:{paddingTop:"20px"}},vr.createElement(ze.Z,{className:i.iv`
                  margin-bottom: 8px !important;
                  font-weight: 600 !important;
                  font-size: 12px !important;
                  line-height: 16px !important;
                  text-transform: uppercase !important;
                `},"Баннер профиля"),vr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"16px",justifyItems:"start"}},vr.createElement(ze.Z,null,"Мы рекомендуем использовать изображение как минимум 600x240. Доступные форматы PNG, JPG или анимированные GIF размером не более 5МБ."),vr.createElement(tt,{sx:{textTransform:"initial"},disableRipple:!0,disableElevation:!0,variant:"contained",color:"success",onClick:()=>null},"Загрузить баннер")))),vr.createElement(Ae.Z,{sx:{padding:"20px 0"}},vr.createElement(ze.Z,{className:i.iv`
                margin-bottom: 8px !important;
                font-weight: 600 !important;
                font-size: 12px !important;
                line-height: 16px !important;
                text-transform: uppercase !important;
              `},"Обо мне"),vr.createElement(ze.Z,{className:i.iv`
                margin-bottom: 8px !important;
                font-size: 14px !important;
                line-height: 20px !important;
              `},"Можно использовать разметку теста и ссылки."),vr.createElement(Ie,{value:s,onChange:e=>d(e.target.value),multiline:!0,rows:4,fullWidth:!0}))),vr.createElement(Ae.Z,null,vr.createElement(Ae.Z,{sx:{padding:"20px 0 0 0"}},vr.createElement(ze.Z,{className:i.iv`
                margin-bottom: 8px !important;
                font-weight: 600 !important;
                font-size: 12px !important;
                line-height: 16px !important;
                text-transform: uppercase !important;
              `},"Предпросмотр")),vr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateRows:"60px 1fr",width:"300px",maxHeight:"429px",boxShadow:"0 8px 16px rgba(0,0,0,0.25)",borderRadius:"8px",overflow:"hidden"}},vr.createElement(Ae.Z,{sx:{position:"relative",height:"60px",backgroundColor:(null==r?void 0:r.color)?r.color:null==r?void 0:r.default_color}},vr.createElement(Ae.Z,{sx:{position:"absolute",top:"16px",left:"16px",width:"92px",height:"92px",backgroundImage:l?`url(${l})`:`url(${null==r?void 0:r.image})`,backgroundColor:(null==r?void 0:r.color)?r.color:null==r?void 0:r.default_color,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",border:`6px solid ${Me.palette.grey[900]}`,borderRadius:"50%",cursor:"pointer","&:hover, &:focus":{"&::before":{content:'""',display:"block",width:"100%",height:"100%",backdropFilter:"brightness(0.75)",borderRadius:"50%",overflow:"hidden"},"&::after":{content:'"Изменить аватар"',display:"block",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"white",fontFamily:"sans-serif",textTransform:"uppercase",fontSize:"10px"}}},onClick:()=>{v.current&&v.current.click()}},vr.createElement(Ae.Z,{sx:{width:"28px",height:"28px",backgroundColor:Me.palette.grey[300],position:"absolute",top:"0",right:"0",borderRadius:"50%"}},vr.createElement(ur.Z,{sx:{width:"18px",height:"18px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})))),vr.createElement(Ae.Z,{sx:{padding:"48px 16px 16px 16px",backgroundColor:Me.palette.grey[900]}},vr.createElement(ze.Z,{className:i.iv`
                  padding: 16px 0;
                  color: #ffffff;
                `},null==r?void 0:r.name,vr.createElement(ze.Z,{className:i.iv`
                    font-size: 20px;
                    line-height: 24px;
                    color: #b9bbbe;
                    text-transform: uppercase;
                  `,component:"span"},"#",null==r?void 0:r.id.slice(-4))),vr.createElement(ze.Z,{className:i.iv`
                  margin-bottom: 8px !important;
                  padding: 20px 0 0 0 !important;
                  font-weight: 600 !important;
                  font-size: 12px !important;
                  line-height: 16px !important;
                  color: #b9bbbe;
                  text-transform: uppercase !important;
                  border-top: 1px solid ${Me.palette.grey[800]};
                `,variant:"subtitle1"},"Обо мне"),vr.createElement(ze.Z,{sx:{maxHeight:"108px",paddingBottom:"20px"},color:"lightgray"},s),vr.createElement(ze.Z,{className:i.iv`
                  margin-bottom: 8px !important;
                  padding: 20px 0 0 0 !important;
                  font-weight: 600 !important;
                  font-size: 12px !important;
                  line-height: 16px !important;
                  color: #b9bbbe;
                  text-transform: uppercase !important;
                  border-top: 1px solid ${Me.palette.grey[800]};
                `,variant:"subtitle1"},"Настройка профиля"),vr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"64px 1fr",columnGap:"16px",alignItems:"center"}},vr.createElement(Ae.Z,{sx:{width:"64px",height:"64px",backgroundColor:Me.palette.primary.light,borderRadius:"8px",display:"grid",alignItems:"center",justifyContent:"center"}},vr.createElement(gr.Z,{sx:{fill:"#ffffff"},width:24,height:24})),vr.createElement(Ae.Z,null,vr.createElement(ze.Z,{variant:"subtitle1",color:"lightgray"},"Профиль пользователя"),vr.createElement(ze.Z,{color:"lightgray"},"Прошло ",f,":",h))))))))}));var br=r(5537),yr=r(5729),Zr=r(7294);const Cr=(0,ve.memo)((({isOpen:e,onClose:t})=>{const r=(0,n.I0)(),[a,o]=(0,ve.useState)(""),[l,i]=(0,ve.useState)("");return Zr.createElement(yr.Z,{open:e,onBackdropClick:t,disableEnforceFocus:!0},Zr.createElement(Ae.Z,{sx:{width:"440px",backgroundColor:"#4a4c52",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"5px",overflow:"hidden"}},Zr.createElement(Ae.Z,{sx:{position:"relative",display:"grid",rowGap:"8px",padding:"24px 16px"}},Zr.createElement(ze.Z,{sx:{fontSize:"24px",color:"#ffffff",textAlign:"center"}},"Введите адрес электронной почты"),Zr.createElement(ze.Z,{sx:{fontSize:"16px",color:"#c0c1c4",textAlign:"center"}},"Введите новый адрес электронной почты и текущий пароль."),Zr.createElement(Ae.Z,{sx:{position:"absolute",top:"16px",right:"16px",cursor:"pointer","& svg":{fill:"#c0c1c4"},"& svg:hover, & svg:focus":{fill:"#ffffff"}},onClick:t},Zr.createElement(br.Z,null))),Zr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"16px",padding:"0 16px 24px 16px"}},Zr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"8px"}},Zr.createElement(ze.Z,{sx:{fontSize:"14px",color:"#c0c1c4",textTransform:"uppercase"}},"Электронная почта"),Zr.createElement(Ie,{sx:{backgroundColor:"#36383a",".MuiOutlinedInput-input":{color:"#dfe0e1"},"input:-webkit-autofill":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:hover":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:focus":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:active":{boxShadow:"0 0 0 30px #36383a inset"}},type:"email",id:"email",name:"email",value:a,onChange:e=>o(e.target.value),autoComplete:"off",fullWidth:!0})),Zr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"8px"}},Zr.createElement(ze.Z,{sx:{fontSize:"14px",color:"#c0c1c4",textTransform:"uppercase"}},"Текущий пароль"),Zr.createElement(Ie,{sx:{backgroundColor:"#36383a",".MuiOutlinedInput-input":{color:"#dfe0e1"},"input:-webkit-autofill":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:hover":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:focus":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:active":{boxShadow:"0 0 0 30px #36383a inset"}},type:"password",id:"password",name:"password",value:l,onChange:e=>i(e.target.value),autoComplete:"off",fullWidth:!0}))),Zr.createElement(Ae.Z,{sx:{display:"grid",justifyContent:"end",gridTemplateColumns:"repeat(2, max-content)",columnGap:"8px",padding:"16px",backgroundColor:"#43454a"}},Zr.createElement(Re.Z,{sx:{display:"grid",alignItems:"center",color:"#ffffff",cursor:"pointer",padding:"2px 16px"},underline:"hover",onClick:()=>{o(""),i(""),t()}},Zr.createElement(ze.Z,{sx:{fontSize:"14px"}},"Отмена")),Zr.createElement(tt,{sx:{textTransform:"initial"},variant:"contained",onClick:()=>{a.trim()&&l.trim()&&(r(N({email:a,password:l})),t())}},"Готово"))))}));var kr=r(7294);const wr=(0,ve.memo)((({isOpen:e,onClose:t})=>{const r=(0,n.I0)(),{user:a}=(0,n.v9)((e=>e.user)),[o,l]=(0,ve.useState)(null==a?void 0:a.name),[i,c]=(0,ve.useState)("");return kr.createElement(yr.Z,{open:e,onBackdropClick:t,disableEnforceFocus:!0},kr.createElement(Ae.Z,{sx:{width:"440px",backgroundColor:"#4a4c52",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"5px",overflow:"hidden"}},kr.createElement(Ae.Z,{sx:{position:"relative",display:"grid",rowGap:"8px",padding:"24px 16px"}},kr.createElement(ze.Z,{sx:{fontSize:"24px",color:"#ffffff",textAlign:"center"}},"Изменить имя пользователя"),kr.createElement(ze.Z,{sx:{fontSize:"16px",color:"#c0c1c4",textAlign:"center"}},"Введите новое имя пользователя и текущий пароль."),kr.createElement(Ae.Z,{sx:{position:"absolute",top:"16px",right:"16px",cursor:"pointer","& svg":{fill:"#c0c1c4"},"& svg:hover, & svg:focus":{fill:"#ffffff"}},onClick:t},kr.createElement(br.Z,{sx:{}}))),kr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"16px",padding:"0 16px 24px 16px"}},kr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"8px"}},kr.createElement(ze.Z,{sx:{fontSize:"14px",color:"#c0c1c4",textTransform:"uppercase"}},"Имя пользователя"),kr.createElement(Ie,{sx:{backgroundColor:"#36383a",".MuiOutlinedInput-input":{color:"#dfe0e1"},"input:-webkit-autofill":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:hover":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:focus":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:active":{boxShadow:"0 0 0 30px #36383a inset"}},type:"text",id:"name",name:"name",value:o,onChange:e=>l(e.target.value),autoComplete:"off",fullWidth:!0})),kr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"8px"}},kr.createElement(ze.Z,{sx:{fontSize:"14px",color:"#c0c1c4",textTransform:"uppercase"}},"Текущий пароль"),kr.createElement(Ie,{sx:{backgroundColor:"#36383a",".MuiOutlinedInput-input":{color:"#dfe0e1"},"input:-webkit-autofill":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:hover":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:focus":{boxShadow:"0 0 0 30px #36383a inset"},"input:-webkit-autofill:active":{boxShadow:"0 0 0 30px #36383a inset"}},type:"password",id:"password",name:"password",value:i,onChange:e=>c(e.target.value),autoComplete:"off",fullWidth:!0}))),kr.createElement(Ae.Z,{sx:{display:"grid",justifyContent:"end",gridTemplateColumns:"repeat(2, max-content)",columnGap:"8px",padding:"16px",backgroundColor:"#43454a"}},kr.createElement(Re.Z,{sx:{display:"grid",alignItems:"center",color:"#ffffff",cursor:"pointer",padding:"2px 16px"},underline:"hover",onClick:()=>{l(null==a?void 0:a.name),c(""),t()}},kr.createElement(ze.Z,{sx:{fontSize:"14px"}},"Отмена")),kr.createElement(tt,{sx:{textTransform:"initial"},variant:"contained",onClick:()=>{(null==o?void 0:o.trim())&&i.trim()&&(r(N({name:o,password:i})),t())}},"Готово"))))}));var Sr=r(7294);const Ir=(0,ve.memo)((()=>{const e=(0,Ee.s0)(),t=(0,n.v9)(gt),[r,a]=(0,ve.useState)(!1),[o,l]=(0,ve.useState)(!1),[i,c]=(0,ve.useState)(!1);return(0,ve.useEffect)((()=>{const t=t=>{"Escape"===t.key&&e("friends")};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[]),Sr.createElement(Ae.Z,{sx:{position:"relative",display:"grid",padding:"60px 40px 80px 40px",alignContent:"start",backgroundColor:"#5e6065"}},Sr.createElement(wr,{isOpen:o,onClose:()=>l(!1)}),Sr.createElement(Cr,{isOpen:i,onClose:()=>c(!1)}),Sr.createElement(ze.Z,{sx:{paddingBottom:"20px",fontWeight:600,fontSize:"20px",lineHeight:"24px",color:"#ffffff"}},"Моя учетная запись"),Sr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"8px",position:"absolute",top:"60px",right:"-40px",textAlign:"center",cursor:"pointer","&:hover svg, &:focus svg":{fill:"#ffffff"}},onClick:()=>e("friends")},Sr.createElement(dr.Z,{sx:{width:"36px",height:"36px",fill:"#b9bbbe"}}),Sr.createElement(ze.Z,{sx:{fontSize:"13px",color:"#b9bbbe"}},"ESC")),Sr.createElement(Ae.Z,{sx:{display:"grid"}},Sr.createElement(Ae.Z,{sx:{backgroundColor:"#36383a",border:"1px solid#1c1e21",borderRadius:"4px",padding:"20px"}},Sr.createElement(Ae.Z,null),Sr.createElement(Ae.Z,{sx:{display:"grid",rowGap:"8px",justifyItems:"start"}},Sr.createElement(ze.Z,{sx:{fontSize:"12px",color:"#c0c1c4",textTransform:"uppercase"}},"Неподтвержденный адрес эл.почты"),Sr.createElement(ze.Z,{sx:{fontSize:"14px",color:"#dfe0e1"}},"Пожалуйста, проверьте свою электронную почту и следуйте инструкциям, чтобы подтвердить свой адресс электронной почты. Если вы не получили письмо или у него истек срок действия, вы можете попросить отправить новое."),Sr.createElement(tt,{sx:{textTransform:"none",backgroundColor:"#686d73","&:hover, &:focus":{backgroundColor:"#84888d"},"&:active":{backgroundColor:"#6b6e74"}},variant:"contained"},"Отправить письмо с подтверждением еще раз"))),Sr.createElement(Ae.Z,{sx:{margin:"20px 0",backgroundColor:"#36383a",borderRadius:"4px",overflow:"hidden"}},Sr.createElement(Ae.Z,{sx:{position:"relative",backgroundColor:(null==t?void 0:t.color)?t.color:null==t?void 0:t.default_color,height:"100px"}},Sr.createElement(Ae.Z,{sx:{position:"absolute",top:"76px",left:"16px",width:"94px",height:"94px",backgroundImage:(null==t?void 0:t.image)?`url(${null==t?void 0:t.image})`:"none",backgroundColor:(null==t?void 0:t.color)?t.color:null==t?void 0:t.default_color,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",border:"6px solid #36383a",borderRadius:"50%",cursor:"pointer"}},Sr.createElement(Ae.Z,{sx:{width:"24px",height:"24px",backgroundColor:"online"===(null==t?void 0:t.status)?"#4caf50":"#ef5350",position:"absolute",bottom:0,right:0,borderRadius:"50%",border:"4px solid #36383a"}}))),Sr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",justifyContent:"space-between",alignItems:"center",padding:"16px 16px 16px 120px"}},Sr.createElement(ze.Z,{sx:{fontSize:"20px",color:"#ffffff"}},null==t?void 0:t.name,Sr.createElement(ze.Z,{component:"span",sx:{fontSize:"20px",color:"#c0c1c4"}},"#",null==t?void 0:t.id.slice(-4))),Sr.createElement(tt,{sx:{textTransform:"none"},variant:"contained",onClick:()=>e("/settings/user-profile")},"Настр. профиль пользователя")),Sr.createElement(Ae.Z,{sx:{display:"grid",margin:"16px",padding:"16px",backgroundColor:"#43454a",borderRadius:"4px"}},Sr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",justifyContent:"space-between",alignItems:"center",padding:"8px 0"}},Sr.createElement(Ae.Z,null,Sr.createElement(ze.Z,{sx:{fontSize:"12px",color:"#c0c1c4",textTransform:"uppercase"}},"Имя пользователя"),Sr.createElement(ze.Z,{sx:{fontSize:"16px",color:"#ffffff"}},null==t?void 0:t.name,Sr.createElement(ze.Z,{component:"span",sx:{fontSize:"16px",color:"#c0c1c4",textTransform:"uppercase"}},"#",null==t?void 0:t.id.slice(-4)))),Sr.createElement(tt,{sx:{textTransform:"none",backgroundColor:"#686d73","&:hover, &:focus":{backgroundColor:"#84888d"},"&:active":{backgroundColor:"#6b6e74"}},variant:"contained",onClick:()=>l(!0)},"Изменить")),Sr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",justifyContent:"space-between",alignItems:"center",padding:"8px 0"}},Sr.createElement(Ae.Z,null,Sr.createElement(ze.Z,{sx:{fontSize:"12px",color:"#c0c1c4",textTransform:"uppercase"}},"Электронная почта"),Sr.createElement(ze.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",columnGap:"8px",fontSize:"16px",color:"#ffffff"}},r?null==t?void 0:t.email:(e=>{const t=e.search("@");return Array(t).fill("*").join("")+e.slice(t)})(null==t?void 0:t.email),Sr.createElement(Re.Z,{sx:{cursor:"pointer",color:"#19b7f5"},underline:"hover",onClick:()=>a(!r)},Sr.createElement(ze.Z,null,r?"Скрыть":"Показать")))),Sr.createElement(tt,{sx:{textTransform:"none",backgroundColor:"#686d73","&:hover, &:focus":{backgroundColor:"#84888d"},"&:active":{backgroundColor:"#6b6e74"}},variant:"contained",onClick:()=>c(!0)},"Изменить")),Sr.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",justifyContent:"space-between",alignItems:"center",padding:"8px 0"}},Sr.createElement(Ae.Z,null,Sr.createElement(ze.Z,{sx:{fontSize:"12px",color:"#c0c1c4",textTransform:"uppercase"}},"Номер телефона"),Sr.createElement(ze.Z,{sx:{fontSize:"16px",color:"#ffffff"}},"Вы еще не указали номер телефона.")),Sr.createElement(tt,{sx:{textTransform:"none",backgroundColor:"#686d73","&:hover, &:focus":{backgroundColor:"#84888d"},"&:active":{backgroundColor:"#6b6e74"}},variant:"contained",disabled:!0},"Изменить"))))))}));var Ar=r(7920),zr=r(8646),Tr=r(9041),Gr=r(165),Rr=r(542),_r=r(6965),jr=r(9149),Or=r(7294);const Pr=(0,ve.memo)((()=>{const e=(0,Ee.s0)(),{state:t,stream:r,getUserMedia:a}=(()=>{const[e,t]=(0,ve.useState)(),[r,a]=(0,ve.useState)(),[n,o]=(0,ve.useState)(),l=()=>{r&&r.getTracks().forEach((e=>{e.stop()}))};return(0,ve.useEffect)((()=>()=>{l()}),[r]),{state:e,stream:r,error:n,getUserMedia:e=>hr(void 0,null,(function*(){try{t("pending");const r=yield navigator.mediaDevices.getUserMedia(e);t("fulfilled"),a(r)}catch(e){t("rejected"),o(e)}})),stopUserMedia:l}})(),{audioInDevices:n,audioOutDevices:o,videoInDevices:l,getDeviceInfo:c}=(()=>{const[e,t]=(0,ve.useState)(),[r,a]=(0,ve.useState)([]),[n,o]=(0,ve.useState)([]),[l,i]=(0,ve.useState)([]),[c,s]=(0,ve.useState)();return{state:e,audioInDevices:r,audioOutDevices:n,videoInDevices:l,error:c,getDeviceInfo:()=>hr(void 0,null,(function*(){try{t("pending");const e=yield navigator.mediaDevices.enumerateDevices();t("fulfilled");const r=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"audiooutput"===e.kind)),l=e.filter((e=>"videoinput"===e.kind));a(r),o(n),i(l)}catch(e){t("rejected"),s(e)}}))}})(),[s,d]=(0,ve.useState)(""),[p,m]=(0,ve.useState)(""),[u,g]=(0,ve.useState)(""),[x,f]=(0,ve.useState)(!1),[h,v]=(0,ve.useState)(!1),E=(0,ve.useRef)(),b=(0,ve.useRef)();return(0,ve.useEffect)((()=>{n.length>0&&d(n[0].deviceId),o.length>0&&m(o[0].deviceId),l.length>0&&g(l[0].deviceId)}),[n,o,l]),(0,ve.useEffect)((()=>{"fulfilled"===t&&c()}),[t]),(0,ve.useEffect)((()=>{c(),a({audio:!0,video:!1})}),[]),(0,ve.useEffect)((()=>{if("fulfilled"===t&&r&&b.current&&E.current){const e=new MediaStream(r.getAudioTracks()),t=new MediaStream(r.getVideoTracks());b.current.srcObject=e,E.current.srcObject=t}return()=>{b.current&&E.current&&(b.current.srcObject=null,E.current.srcObject=null)}}),[t,r]),Or.createElement(Ae.Z,{sx:{position:"relative",display:"grid",padding:"60px 40px 80px 40px",alignContent:"start",backgroundColor:"#5e6065"}},Or.createElement(Ae.Z,{sx:{display:"grid",rowGap:"8px",position:"absolute",top:"60px",right:"-40px",textAlign:"center",cursor:"pointer","&:hover svg, &:focus svg":{fill:"#ffffff"}},onClick:()=>e("/friends")},Or.createElement(dr.Z,{sx:{width:"36px",height:"36px",fill:"#b9bbbe"}}),Or.createElement(ze.Z,{sx:{fontSize:"13px",color:"#b9bbbe"}},"ESC")),Or.createElement(ze.Z,{className:i.iv`
          padding-bottom: 20px !important;
          font-weight: 600 !important;
          font-size: 20px !important;
          line-height: 24px !important;
          color: #ffffff !important;
        `},"Насройки голоса"),Or.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 320px)",alignItems:"center",columnGap:"16px",marginBottom:"16px"}},Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Устройство ввода"),Or.createElement(Ar.Z,{id:"audioInDevice",value:s||"default",onChange:e=>d(e.target.value),fullWidth:!0},n.map((e=>Or.createElement(Bt.Z,{key:e.deviceId,sx:{maxWidth:"320px",whiteSpace:"normal"},value:e.deviceId||"default"},e.label||"Default"))))),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Устройство вывода"),Or.createElement(Ar.Z,{id:"audioOutDevice",value:p||"default",onChange:e=>m(e.target.value),fullWidth:!0},o.map((e=>Or.createElement(Bt.Z,{key:e.deviceId,sx:{maxWidth:"320px",whiteSpace:"normal"},value:e.deviceId||"default"},e.label||"Default"))))),Or.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 320px)",alignItems:"center",columnGap:"16px",marginBottom:"16px"}},Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Громкость микрофона"),Or.createElement(zr.ZP,{defaultValue:100,valueLabelDisplay:"auto",max:100})),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Громкость звука"),Or.createElement(zr.ZP,{defaultValue:100,valueLabelDisplay:"auto",max:200})))),Or.createElement(Ae.Z,{sx:{display:"grid",marginBottom:"16px"}},Or.createElement(ze.Z,null,"Проверка микрофона"),Or.createElement(ze.Z,{variant:"caption"},"Проблемы с микрофоном? Начните проверку и скажите какую-нибудь ерунду - мы тут же ее воспроизведем."),Or.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"max-content 1fr",alignItems:"center",columnGap:"8px"}},Or.createElement(tt,{variant:"contained",onClick:()=>f(!x)},x?"Прекратить проверку":"Давайте проверим"),Or.createElement(Ae.Z,null,Or.createElement(Tr.Z,{variant:"determinate",value:0}),x&&Or.createElement(ze.Z,{variant:"caption"},"Воспроизводим ваш прекрасный голос")),Or.createElement(Ae.Z,{component:"audio",ref:b,autoPlay:!0,muted:!x})),Or.createElement(ze.Z,{variant:"caption"},"Нужна помощь с голосовым или видеочатом? Ознакомьтесь с нашим"," ",Or.createElement(Re.Z,null,"руководством по устранению неполадок"),".")),Or.createElement(lt.Z,{sx:{margin:"32px 0",borderColor:Me.palette.grey[800]}}),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Режим ввода"),Or.createElement(Gr.Z,{defaultValue:"voice"},Or.createElement(Rr.Z,{value:"voice",control:Or.createElement(_r.Z,null),label:"Активация по голосу"}),Or.createElement(Rr.Z,{value:"button",control:Or.createElement(_r.Z,null),label:"Режим рации (ограниченный)"}))),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Чувствительнось ввода"),Or.createElement(zr.ZP,{defaultValue:40,valueLabelDisplay:"auto",max:100})),Or.createElement(lt.Z,{sx:{margin:"32px 0",borderColor:Me.palette.grey[800]}}),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,{className:i.iv`
            font-weight: 600 !important;
            font-size: 20px !important;
            line-height: 24px !important;
            color: #ffffff !important;
          `},"Насройки видео"),Or.createElement(Ae.Z,{sx:{display:"grid",rowGap:"16px"}},Or.createElement(Ae.Z,{sx:{position:"relative",width:"100%",height:"220px",backgroundColor:Me.palette.grey[500],display:"grid",alignItems:"center",justifyContent:"center",borderRadius:"8px",boxShadow:`inset 0 0 0 1px ${Me.palette.grey[800]}`}},Or.createElement(Ae.Z,{sx:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},component:"video",ref:E,autoPlay:!0,muted:!0}),!h&&Or.createElement(tt,{variant:"contained",onClick:()=>{a({audio:!0,video:!0}),v(!0)}},"Проверить видео")))),Or.createElement(Ae.Z,null,Or.createElement(Ae.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",alignItems:"center",justifyContent:"space-between"}},Or.createElement(ze.Z,null,"Препросмотр видео (всегда)"),Or.createElement(jr.Z,{checked:!1})),Or.createElement(ze.Z,null,"Использовать предпросмотр каждый раз, как вы включаете видео")),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Камера"),Or.createElement(Ar.Z,{id:"videoInDevice",value:u||"default",onChange:e=>g(e.target.value),fullWidth:!0},l.map((e=>Or.createElement(Bt.Z,{key:e.deviceId,sx:{maxWidth:"320px",whiteSpace:"normal"},value:e.deviceId||"default"},e.label||"Default"))))),Or.createElement(lt.Z,{sx:{margin:"32px 0",borderColor:Me.palette.grey[800]}}),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Расширенные"),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Аудио кодек"),Or.createElement(Ae.Z,{sx:{border:"1px solid #000000"}},Or.createElement(ze.Z,null,"Video Calls использует отборный, органический, выращенный на домашней грядке голосовой кодек Opus,"))),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Обработка голоса"),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Эхоподавление"),Or.createElement(jr.Z,{checked:!0})),Or.createElement(lt.Z,{sx:{margin:"8px 0",borderColor:Me.palette.grey[800]}}),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Шумоподавление"),Or.createElement(jr.Z,{checked:!1})),Or.createElement(lt.Z,{sx:{margin:"8px 0",borderColor:Me.palette.grey[800]}}),Or.createElement(Ae.Z,null,Or.createElement(ze.Z,null,"Автоматическа регулировка усиления"),Or.createElement(jr.Z,{checked:!0})),Or.createElement(lt.Z,{sx:{margin:"8px 0",borderColor:Me.palette.grey[800]}})),Or.createElement(Ae.Z,null,Or.createElement(tt,{variant:"outlined",color:"error"},"Сбросить голосовые настройки"))))}));var Mr=r(7294);const Dr=(0,ve.memo)((()=>Mr.createElement(Ee.Z5,null,Mr.createElement(Ee.AW,{path:"friends",element:Mr.createElement(zt,null)},Mr.createElement(Ee.AW,{path:"all-users",element:Mr.createElement(Yt,null)}),Mr.createElement(Ee.AW,{path:"friends-online",element:Mr.createElement(Jt,null)}),Mr.createElement(Ee.AW,{path:"friends-invites",element:Mr.createElement(tr,null)}),Mr.createElement(Ee.AW,{path:"friends-approvals",element:Mr.createElement(or,null)}),Mr.createElement(Ee.AW,{path:"add-to-friends",element:Mr.createElement(sr,null)})),Mr.createElement(Ee.AW,{path:"messages",element:Mr.createElement(Gt,null)}),Mr.createElement(Ee.AW,{path:"settings",element:Mr.createElement(Ot,null)},Mr.createElement(Ee.AW,{path:"user-account",element:Mr.createElement(Ir,null)}),Mr.createElement(Ee.AW,{path:"user-profile",element:Mr.createElement(Er,null)}),Mr.createElement(Ee.AW,{path:"voice-and-video",element:Mr.createElement(Pr,null)})),Mr.createElement(Ee.AW,{path:"channels",element:Mr.createElement($t,null)}),Mr.createElement(Ee.AW,{path:"*",element:Mr.createElement(Ee.Fg,{to:"friends/all-users"})}))));var $r=r(7294);const Wr=(0,ve.memo)((({isAuthorizated:e})=>e?$r.createElement(Dr,null):$r.createElement(Ve,null)));var Br=r(7294);const Ur=()=>{const e=(0,n.I0)(),{authorizated:t}=(0,n.v9)((e=>e.authorization)),{user:r}=(0,n.v9)((e=>e.user));return(0,ve.useEffect)((()=>{localStorage.getItem("access_token")&&e(y())}),[]),(0,ve.useEffect)((()=>{t&&(e(W()),ut.on("on-connect",(()=>{e(W())})))}),[t]),(0,ve.useEffect)((()=>{(null==r?void 0:r.id)&&ut.emit("on-connect",r.id)}),[null==r?void 0:r.id]),Br.createElement(Wr,{isAuthorizated:t})};var Nr=r(3362),qr=r(7294);const Lr=()=>(i.hi`
    *,
    *::before,
    *::after {
      box-sizing: inherit;
    }

    html {
      box-sizing: border-box;
    }

    html,
    body,
    .root {
      height: 100%;
    }

    body {
      margin: 0;
      background: radial-gradient(105.05% 99.28% at 50% 29.72%, #8c9eff 0%, #536dfe 42.9%, #536dfe 61.7%, #3d5afe 84.71%, #304ffe 100%);
      background-repeat: no-repeat;
    }

    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active {
      box-shadow: 0 0 0 30px #ffffff inset;
    }
  `,(0,Nr.D)(),qr.createElement(n.zt,{store:he},qr.createElement(l.Z,{theme:Me},qr.createElement(o.UT,null,qr.createElement(Ur,null),qr.createElement(u.Ix,{theme:"light"})))));(0,a.render)(qr.createElement(Lr,null),document.querySelector(".root"))}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,r,n,o)=>{if(!r){var l=1/0;for(d=0;d<e.length;d++){for(var[r,n,o]=e[d],i=!0,c=0;c<r.length;c++)(!1&o||l>=o)&&Object.keys(a.O).every((e=>a.O[e](r[c])))?r.splice(c--,1):(i=!1,o<l&&(l=o));if(i){e.splice(d--,1);var s=n();void 0!==s&&(t=s)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,n,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e+"../"})(),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[l,i,c]=r,s=0;if(l.some((t=>0!==e[t]))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var d=c(a)}for(t&&t(r);s<l.length;s++)o=l[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},r=globalThis.webpackChunkvideo_calls=globalThis.webpackChunkvideo_calls||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=a.O(void 0,[160],(()=>a(4242)));n=a.O(n)})();
//# sourceMappingURL=main.909219a1bff38a7cb741.js.map